/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HorizontalBlocksPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var HorizontalBlockRenderer = class extends import_obsidian.MarkdownRenderChild {
  constructor(containerEl, plugin, source, sourcePath) {
    super(containerEl);
    __publicField(this, "plugin");
    __publicField(this, "source");
    __publicField(this, "sourcePath");
    this.plugin = plugin;
    this.source = source;
    this.sourcePath = sourcePath;
  }
  async onload() {
    const container = this.containerEl;
    container.className = "horizontal-block-container";
    const blockId = await this.plugin.hashString(this.source);
    const savedLayout = this.plugin.settings[`horizontal-block-layout-${blockId}`] || {};
    const sections = this.source.split(/^---$/m).map((part) => part.trim());
    const blocks = [];
    for (let index = 0; index < sections.length; index++) {
      const markdown = sections[index];
      const block = await this.createRenderedBlock(markdown, savedLayout[`title-${index}`]);
      const savedWidth = savedLayout[`width-${index}`];
      if (savedWidth) {
        block.classList.add("horizontal-block-flex-fixed");
        this.plugin.applyBlockWidth(block, savedWidth);
      } else {
        block.classList.add("horizontal-block-flex-grow");
      }
      blocks.push(block);
    }
    for (let i = 0; i < blocks.length; i++) {
      container.appendChild(blocks[i]);
      if (i < blocks.length - 1) {
        const resizer = document.createElement("div");
        resizer.className = "horizontal-block-resizer";
        container.appendChild(resizer);
        this.makeResizable(blocks[i], blocks[i + 1], resizer, blockId, i);
      }
    }
  }
  async createRenderedBlock(markdown, title) {
    const block = document.createElement("div");
    block.className = "resizable-block";
    if (title) {
      const header = document.createElement("div");
      header.className = "block-title";
      header.innerText = title;
      block.appendChild(header);
    }
    const preview = document.createElement("div");
    preview.className = "horizontal-block-md-preview";
    preview.classList.add("markdown-rendered");
    await import_obsidian.MarkdownRenderer.render(this.plugin.app, markdown, preview, this.sourcePath, this);
    const images = preview.querySelectorAll("img");
    images.forEach((img) => {
      img.classList.add("horizontal-block-image");
    });
    block.appendChild(preview);
    return block;
  }
  makeResizable(left, right, resizer, blockId, index) {
    let isResizing = false;
    let startX = 0;
    let startLeftWidth = 0;
    let mouseMoveListener = null;
    let mouseUpListener = null;
    const mouseDownHandler = (e) => {
      isResizing = true;
      startX = e.clientX;
      startLeftWidth = left.getBoundingClientRect().width;
      document.body.classList.add("horizontal-block-resizing-cursor");
      left.classList.add("horizontal-block-flex-fixed");
      left.classList.remove("horizontal-block-flex-grow");
      right.classList.add("horizontal-block-flex-grow");
      right.classList.remove("horizontal-block-flex-fixed");
      mouseMoveListener = (e2) => {
        if (!isResizing) return;
        const dx = e2.clientX - startX;
        const newLeftWidth = startLeftWidth + dx;
        left.classList.add("horizontal-block-flex-fixed");
        left.classList.remove("horizontal-block-flex-grow");
        this.plugin.applyBlockWidth(left, newLeftWidth);
        right.classList.add("horizontal-block-flex-grow");
        right.classList.remove("horizontal-block-flex-fixed");
        this.plugin.removeBlockWidth(right);
      };
      mouseUpListener = async () => {
        isResizing = false;
        document.body.classList.remove("horizontal-block-resizing-cursor");
        if (mouseMoveListener) {
          document.removeEventListener("mousemove", mouseMoveListener);
          mouseMoveListener = null;
        }
        if (mouseUpListener) {
          document.removeEventListener("mouseup", mouseUpListener);
          mouseUpListener = null;
        }
        const finalWidth = left.getBoundingClientRect().width;
        const layoutKey = `horizontal-block-layout-${blockId}`;
        if (!this.plugin.settings[layoutKey]) this.plugin.settings[layoutKey] = {};
        this.plugin.settings[layoutKey][`width-${index}`] = finalWidth;
        await this.plugin.saveData(this.plugin.settings);
      };
      document.addEventListener("mousemove", mouseMoveListener);
      document.addEventListener("mouseup", mouseUpListener);
    };
    this.registerDomEvent(resizer, "mousedown", mouseDownHandler);
  }
};
var HorizontalBlocksPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    __publicField(this, "settings", {});
    __publicField(this, "styleEl");
  }
  async onload() {
    this.settings = await this.loadData() || {};
    this.registerMarkdownCodeBlockProcessor("horizontal", async (source, el, ctx) => {
      const renderer = new HorizontalBlockRenderer(el, this, source, ctx.sourcePath);
      ctx.addChild(renderer);
    });
  }
  onunload() {
  }
  async hashString(str) {
    const buffer = new TextEncoder().encode(str);
    const digest = await crypto.subtle.digest("SHA-256", buffer);
    return Array.from(new Uint8Array(digest)).map((x) => x.toString(16).padStart(2, "0")).join("").slice(0, 16);
  }
  applyBlockWidth(block, width) {
    block.classList.add("has-width");
    block.setAttribute("style", `--block-width: ${Math.round(width)}px`);
  }
  removeBlockWidth(block) {
    block.classList.remove("has-width");
    block.removeAttribute("style");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNYXJrZG93blJlbmRlcmVyLCBNYXJrZG93blJlbmRlckNoaWxkIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmNsYXNzIEhvcml6b250YWxCbG9ja1JlbmRlcmVyIGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XG4gIHByaXZhdGUgcGx1Z2luOiBIb3Jpem9udGFsQmxvY2tzUGx1Z2luO1xuICBwcml2YXRlIHNvdXJjZTogc3RyaW5nO1xuICBwcml2YXRlIHNvdXJjZVBhdGg6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogSG9yaXpvbnRhbEJsb2Nrc1BsdWdpbiwgc291cmNlOiBzdHJpbmcsIHNvdXJjZVBhdGg6IHN0cmluZykge1xuICAgIHN1cGVyKGNvbnRhaW5lckVsKTtcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLnNvdXJjZVBhdGggPSBzb3VyY2VQYXRoO1xuICB9XG5cbiAgYXN5bmMgb25sb2FkKCkge1xuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWw7XG4gICAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwiaG9yaXpvbnRhbC1ibG9jay1jb250YWluZXJcIjtcblxuICAgIGNvbnN0IGJsb2NrSWQgPSBhd2FpdCB0aGlzLnBsdWdpbi5oYXNoU3RyaW5nKHRoaXMuc291cmNlKTtcbiAgICBjb25zdCBzYXZlZExheW91dCA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2Bob3Jpem9udGFsLWJsb2NrLWxheW91dC0ke2Jsb2NrSWR9YF0gfHwge307XG5cbiAgICBjb25zdCBzZWN0aW9ucyA9IHRoaXMuc291cmNlLnNwbGl0KC9eLS0tJC9tKS5tYXAocGFydCA9PiBwYXJ0LnRyaW0oKSk7XG4gICAgY29uc3QgYmxvY2tzOiBIVE1MRWxlbWVudFtdID0gW107XG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBjb25zdCBtYXJrZG93biA9IHNlY3Rpb25zW2luZGV4XTtcbiAgICAgIGNvbnN0IGJsb2NrID0gYXdhaXQgdGhpcy5jcmVhdGVSZW5kZXJlZEJsb2NrKG1hcmtkb3duLCBzYXZlZExheW91dFtgdGl0bGUtJHtpbmRleH1gXSk7XG4gICAgICBjb25zdCBzYXZlZFdpZHRoID0gc2F2ZWRMYXlvdXRbYHdpZHRoLSR7aW5kZXh9YF07XG5cbiAgICAgIGlmIChzYXZlZFdpZHRoKSB7XG4gICAgICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoXCJob3Jpem9udGFsLWJsb2NrLWZsZXgtZml4ZWRcIik7XG4gICAgICAgIHRoaXMucGx1Z2luLmFwcGx5QmxvY2tXaWR0aChibG9jaywgc2F2ZWRXaWR0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBibG9jay5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbC1ibG9jay1mbGV4LWdyb3dcIik7XG4gICAgICB9XG5cbiAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICB9XG5cbiAgICAvLyBBcHBlbmQgYmxvY2tzIGFuZCByZXNpemVyc1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmxvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYmxvY2tzW2ldKTtcbiAgICAgIGlmIChpIDwgYmxvY2tzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgY29uc3QgcmVzaXplciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHJlc2l6ZXIuY2xhc3NOYW1lID0gXCJob3Jpem9udGFsLWJsb2NrLXJlc2l6ZXJcIjtcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlc2l6ZXIpO1xuICAgICAgICB0aGlzLm1ha2VSZXNpemFibGUoYmxvY2tzW2ldLCBibG9ja3NbaSArIDFdLCByZXNpemVyLCBibG9ja0lkLCBpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVSZW5kZXJlZEJsb2NrKG1hcmtkb3duOiBzdHJpbmcsIHRpdGxlPzogc3RyaW5nKTogUHJvbWlzZTxIVE1MRWxlbWVudD4ge1xuICAgIGNvbnN0IGJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBibG9jay5jbGFzc05hbWUgPSBcInJlc2l6YWJsZS1ibG9ja1wiO1xuXG4gICAgaWYgKHRpdGxlKSB7XG4gICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgaGVhZGVyLmNsYXNzTmFtZSA9IFwiYmxvY2stdGl0bGVcIjtcbiAgICAgIGhlYWRlci5pbm5lclRleHQgPSB0aXRsZTtcbiAgICAgIGJsb2NrLmFwcGVuZENoaWxkKGhlYWRlcik7XG4gICAgfVxuXG4gICAgY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgcHJldmlldy5jbGFzc05hbWUgPSBcImhvcml6b250YWwtYmxvY2stbWQtcHJldmlld1wiO1xuICAgIHByZXZpZXcuY2xhc3NMaXN0LmFkZChcIm1hcmtkb3duLXJlbmRlcmVkXCIpO1xuXG4gICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5wbHVnaW4uYXBwLCBtYXJrZG93biwgcHJldmlldywgdGhpcy5zb3VyY2VQYXRoLCB0aGlzKTtcblxuICAgIGNvbnN0IGltYWdlcyA9IHByZXZpZXcucXVlcnlTZWxlY3RvckFsbChcImltZ1wiKTtcbiAgICBpbWFnZXMuZm9yRWFjaCgoaW1nOiBIVE1MSW1hZ2VFbGVtZW50KSA9PiB7XG4gICAgICBpbWcuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWwtYmxvY2staW1hZ2VcIik7XG4gICAgfSk7XG5cbiAgICBibG9jay5hcHBlbmRDaGlsZChwcmV2aWV3KTtcblxuICAgIHJldHVybiBibG9jaztcbiAgfVxuXG4gIG1ha2VSZXNpemFibGUobGVmdDogSFRNTEVsZW1lbnQsIHJpZ2h0OiBIVE1MRWxlbWVudCwgcmVzaXplcjogSFRNTEVsZW1lbnQsIGJsb2NrSWQ6IHN0cmluZywgaW5kZXg6IG51bWJlcikge1xuICAgIGxldCBpc1Jlc2l6aW5nID0gZmFsc2U7XG4gICAgbGV0IHN0YXJ0WCA9IDA7XG4gICAgbGV0IHN0YXJ0TGVmdFdpZHRoID0gMDtcbiAgICBsZXQgbW91c2VNb3ZlTGlzdGVuZXI6ICgoZTogTW91c2VFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgbW91c2VVcExpc3RlbmVyOiAoKGU6IE1vdXNlRXZlbnQpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdCBtb3VzZURvd25IYW5kbGVyID0gKGU6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlzUmVzaXppbmcgPSB0cnVlO1xuICAgICAgc3RhcnRYID0gZS5jbGllbnRYO1xuICAgICAgc3RhcnRMZWZ0V2lkdGggPSBsZWZ0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbC1ibG9jay1yZXNpemluZy1jdXJzb3JcIik7XG5cbiAgICAgIC8vIFByZXBhcmUgY2xhc3NlcyBmb3IgcmVzaXppbmcgc3RhdGVcbiAgICAgIGxlZnQuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWwtYmxvY2stZmxleC1maXhlZFwiKTtcbiAgICAgIGxlZnQuY2xhc3NMaXN0LnJlbW92ZShcImhvcml6b250YWwtYmxvY2stZmxleC1ncm93XCIpO1xuICAgICAgcmlnaHQuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWwtYmxvY2stZmxleC1ncm93XCIpO1xuICAgICAgcmlnaHQuY2xhc3NMaXN0LnJlbW92ZShcImhvcml6b250YWwtYmxvY2stZmxleC1maXhlZFwiKTtcblxuICAgICAgLy8gQ3JlYXRlIGZyZXNoIGV2ZW50IGhhbmRsZXJzIGZvciB0aGlzIHJlc2l6ZSBzZXNzaW9uXG4gICAgICBtb3VzZU1vdmVMaXN0ZW5lciA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmICghaXNSZXNpemluZykgcmV0dXJuO1xuICAgICAgICBjb25zdCBkeCA9IGUuY2xpZW50WCAtIHN0YXJ0WDtcbiAgICAgICAgY29uc3QgbmV3TGVmdFdpZHRoID0gc3RhcnRMZWZ0V2lkdGggKyBkeDtcbiAgICAgICAgbGVmdC5jbGFzc0xpc3QuYWRkKFwiaG9yaXpvbnRhbC1ibG9jay1mbGV4LWZpeGVkXCIpO1xuICAgICAgICBsZWZ0LmNsYXNzTGlzdC5yZW1vdmUoXCJob3Jpem9udGFsLWJsb2NrLWZsZXgtZ3Jvd1wiKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uYXBwbHlCbG9ja1dpZHRoKGxlZnQsIG5ld0xlZnRXaWR0aCk7XG5cbiAgICAgICAgcmlnaHQuY2xhc3NMaXN0LmFkZChcImhvcml6b250YWwtYmxvY2stZmxleC1ncm93XCIpO1xuICAgICAgICByaWdodC5jbGFzc0xpc3QucmVtb3ZlKFwiaG9yaXpvbnRhbC1ibG9jay1mbGV4LWZpeGVkXCIpO1xuICAgICAgICB0aGlzLnBsdWdpbi5yZW1vdmVCbG9ja1dpZHRoKHJpZ2h0KTtcbiAgICAgIH07XG5cbiAgICAgIG1vdXNlVXBMaXN0ZW5lciA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgaXNSZXNpemluZyA9IGZhbHNlO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoXCJob3Jpem9udGFsLWJsb2NrLXJlc2l6aW5nLWN1cnNvclwiKTtcblxuICAgICAgICAvLyBDbGVhbiB1cCBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgaWYgKG1vdXNlTW92ZUxpc3RlbmVyKSB7XG4gICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBtb3VzZU1vdmVMaXN0ZW5lcik7XG4gICAgICAgICAgbW91c2VNb3ZlTGlzdGVuZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3VzZVVwTGlzdGVuZXIpIHtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBtb3VzZVVwTGlzdGVuZXIpO1xuICAgICAgICAgIG1vdXNlVXBMaXN0ZW5lciA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBmaW5hbFdpZHRoID0gbGVmdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgY29uc3QgbGF5b3V0S2V5ID0gYGhvcml6b250YWwtYmxvY2stbGF5b3V0LSR7YmxvY2tJZH1gO1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzW2xheW91dEtleV0pIHRoaXMucGx1Z2luLnNldHRpbmdzW2xheW91dEtleV0gPSB7fTtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3NbbGF5b3V0S2V5XVtgd2lkdGgtJHtpbmRleH1gXSA9IGZpbmFsV2lkdGg7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVEYXRhKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcbiAgICAgIH07XG5cbiAgICAgIC8vIEFkZCBldmVudCBsaXN0ZW5lcnNcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgbW91c2VNb3ZlTGlzdGVuZXIpO1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgbW91c2VVcExpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50KHJlc2l6ZXIsIFwibW91c2Vkb3duXCIsIG1vdXNlRG93bkhhbmRsZXIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhvcml6b250YWxCbG9ja3NQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICBzZXR0aW5nczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuICBwcml2YXRlIHN0eWxlRWw/OiBIVE1MU3R5bGVFbGVtZW50O1xuXG4gIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAvLyBMb2FkIHN0b3JlZCBibG9jayB3aWR0aHNcbiAgICB0aGlzLnNldHRpbmdzID0gKGF3YWl0IHRoaXMubG9hZERhdGEoKSkgfHwge307XG5cbiAgICB0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoXCJob3Jpem9udGFsXCIsIGFzeW5jIChzb3VyY2UsIGVsLCBjdHgpID0+IHtcbiAgICAgIGNvbnN0IHJlbmRlcmVyID0gbmV3IEhvcml6b250YWxCbG9ja1JlbmRlcmVyKGVsLCB0aGlzLCBzb3VyY2UsIGN0eC5zb3VyY2VQYXRoKTtcbiAgICAgIGN0eC5hZGRDaGlsZChyZW5kZXJlcik7XG4gICAgfSk7XG4gIH1cblxuICBvbnVubG9hZCgpIHtcbiAgfVxuXG4gIGFzeW5jIGhhc2hTdHJpbmcoc3RyOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGJ1ZmZlciA9IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzdHIpO1xuICAgIGNvbnN0IGRpZ2VzdCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KCdTSEEtMjU2JywgYnVmZmVyKTtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShkaWdlc3QpKVxuICAgICAgLm1hcCh4ID0+IHgudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJykpXG4gICAgICAuam9pbignJylcbiAgICAgIC5zbGljZSgwLCAxNik7IC8vIFNob3J0ZW4gZm9yIGtleVxuICB9XG5cbiAgYXBwbHlCbG9ja1dpZHRoKGJsb2NrOiBIVE1MRWxlbWVudCwgd2lkdGg6IG51bWJlcikge1xuICAgIGJsb2NrLmNsYXNzTGlzdC5hZGQoJ2hhcy13aWR0aCcpO1xuICAgIC8vIFVzZSBpbmxpbmUgc3R5bGUgd2l0aCBDU1MgY3VzdG9tIHByb3BlcnR5XG4gICAgYmxvY2suc2V0QXR0cmlidXRlKCdzdHlsZScsIGAtLWJsb2NrLXdpZHRoOiAke01hdGgucm91bmQod2lkdGgpfXB4YCk7XG4gIH1cblxuICByZW1vdmVCbG9ja1dpZHRoKGJsb2NrOiBIVE1MRWxlbWVudCkge1xuICAgIGJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2hhcy13aWR0aCcpO1xuICAgIGJsb2NrLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgfVxuXG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBOEQ7QUFFOUQsSUFBTSwwQkFBTixjQUFzQyxvQ0FBb0I7QUFBQSxFQUt4RCxZQUFZLGFBQTBCLFFBQWdDLFFBQWdCLFlBQW9CO0FBQ3hHLFVBQU0sV0FBVztBQUxuQix3QkFBUTtBQUNSLHdCQUFRO0FBQ1Isd0JBQVE7QUFJTixTQUFLLFNBQVM7QUFDZCxTQUFLLFNBQVM7QUFDZCxTQUFLLGFBQWE7QUFBQSxFQUNwQjtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ2IsVUFBTSxZQUFZLEtBQUs7QUFDdkIsY0FBVSxZQUFZO0FBRXRCLFVBQU0sVUFBVSxNQUFNLEtBQUssT0FBTyxXQUFXLEtBQUssTUFBTTtBQUN4RCxVQUFNLGNBQWMsS0FBSyxPQUFPLFNBQVMsMkJBQTJCLE9BQU8sRUFBRSxLQUFLLENBQUM7QUFFbkYsVUFBTSxXQUFXLEtBQUssT0FBTyxNQUFNLFFBQVEsRUFBRSxJQUFJLFVBQVEsS0FBSyxLQUFLLENBQUM7QUFDcEUsVUFBTSxTQUF3QixDQUFDO0FBRS9CLGFBQVMsUUFBUSxHQUFHLFFBQVEsU0FBUyxRQUFRLFNBQVM7QUFDcEQsWUFBTSxXQUFXLFNBQVMsS0FBSztBQUMvQixZQUFNLFFBQVEsTUFBTSxLQUFLLG9CQUFvQixVQUFVLFlBQVksU0FBUyxLQUFLLEVBQUUsQ0FBQztBQUNwRixZQUFNLGFBQWEsWUFBWSxTQUFTLEtBQUssRUFBRTtBQUUvQyxVQUFJLFlBQVk7QUFDZCxj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QyxLQUFLLE9BQU8sU0FBUyxTQUFTLEVBQUcsTUFBSyxPQUFPLFNBQVMsU0FBUyxJQUFJLENBQUM7QUFDekUsYUFBSyxPQUFPLFNBQVMsU0FBUyxFQUFFLFNBQVMsS0FBSyxFQUFFLElBQUk7QUFDcEQsY0FBTSxLQUFLLE9BQU8sU0FBUyxLQUFLLE9BQU8sUUFBUTtBQUFBLE1BQ2pEO0FBR0EsZUFBUyxpQkFBaUIsYUFBYSxpQkFBaUI7QUFDeEQsZUFBUyxpQkFBaUIsV0FBVyxlQUFlO0FBQUEsSUFDdEQ7QUFFQSxTQUFLLGlCQUFpQixTQUFTLGFBQWEsZ0JBQWdCO0FBQUEsRUFDOUQ7QUFDRjtBQUVBLElBQXFCLHlCQUFyQixjQUFvRCx1QkFBTztBQUFBLEVBQTNEO0FBQUE7QUFDRSxvQ0FBZ0MsQ0FBQztBQUNqQyx3QkFBUTtBQUFBO0FBQUEsRUFFUixNQUFNLFNBQVM7QUFFYixTQUFLLFdBQVksTUFBTSxLQUFLLFNBQVMsS0FBTSxDQUFDO0FBRTVDLFNBQUssbUNBQW1DLGNBQWMsT0FBTyxRQUFRLElBQUksUUFBUTtBQUMvRSxZQUFNLFdBQVcsSUFBSSx3QkFBd0IsSUFBSSxNQUFNLFFBQVEsSUFBSSxVQUFVO0FBQzdFLFVBQUksU0FBUyxRQUFRO0FBQUEsSUFDdkIsQ0FBQztBQUFBLEVBQ0g7QUFBQSxFQUVBLFdBQVc7QUFBQSxFQUNYO0FBQUEsRUFFQSxNQUFNLFdBQVcsS0FBOEI7QUFDN0MsVUFBTSxTQUFTLElBQUksWUFBWSxFQUFFLE9BQU8sR0FBRztBQUMzQyxVQUFNLFNBQVMsTUFBTSxPQUFPLE9BQU8sT0FBTyxXQUFXLE1BQU07QUFDM0QsV0FBTyxNQUFNLEtBQUssSUFBSSxXQUFXLE1BQU0sQ0FBQyxFQUNyQyxJQUFJLE9BQUssRUFBRSxTQUFTLEVBQUUsRUFBRSxTQUFTLEdBQUcsR0FBRyxDQUFDLEVBQ3hDLEtBQUssRUFBRSxFQUNQLE1BQU0sR0FBRyxFQUFFO0FBQUEsRUFDaEI7QUFBQSxFQUVBLGdCQUFnQixPQUFvQixPQUFlO0FBQ2pELFVBQU0sVUFBVSxJQUFJLFdBQVc7QUFFL0IsVUFBTSxhQUFhLFNBQVMsa0JBQWtCLEtBQUssTUFBTSxLQUFLLENBQUMsSUFBSTtBQUFBLEVBQ3JFO0FBQUEsRUFFQSxpQkFBaUIsT0FBb0I7QUFDbkMsVUFBTSxVQUFVLE9BQU8sV0FBVztBQUNsQyxVQUFNLGdCQUFnQixPQUFPO0FBQUEsRUFDL0I7QUFFRjsiLAogICJuYW1lcyI6IFsiZSJdCn0K
