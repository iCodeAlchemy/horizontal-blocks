/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var g=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var b=Object.prototype.hasOwnProperty;var x=(n,t,e)=>t in n?g(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var M=(n,t)=>{for(var e in t)g(n,e,{get:t[e],enumerable:!0})},z=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of k(t))!b.call(n,o)&&o!==e&&g(n,o,{get:()=>t[o],enumerable:!(i=y(t,o))||i.enumerable});return n};var T=n=>z(g({},"__esModule",{value:!0}),n);var E=(n,t,e)=>x(n,typeof t!="symbol"?t+"":t,e);var H={};M(H,{default:()=>p});module.exports=T(H);var L=require("obsidian");var p=class extends L.Plugin{constructor(){super(...arguments);E(this,"settings",{});E(this,"styleEl")}async onload(){this.settings=await this.loadData()||{},this.registerMarkdownCodeBlockProcessor("horizontal",async(e,i,o)=>{let a=document.createElement("div");a.className="horizontal-block-container";let d=await this.hashString(e),r=this.settings[`horizontal-block-layout-${d}`]||{},m=e.split(/^---$/m).map(s=>s.trim()),c=[];m.forEach((s,l)=>{let h=this.createRenderedBlock(s,o.sourcePath,r[`title-${l}`]),v=r[`width-${l}`];v?(h.classList.add("flex-fixed"),this.applyBlockWidth(h,v)):h.classList.add("flex-grow"),c.push(h)});for(let s=0;s<c.length;s++)if(a.appendChild(c[s]),s<c.length-1){let l=document.createElement("div");l.className="resizer",a.appendChild(l),this.makeResizable(c[s],c[s+1],l,d,s)}i.appendChild(a)})}onunload(){}createRenderedBlock(e,i,o){let a=document.createElement("div");if(a.className="resizable-block",o){let r=document.createElement("div");r.className="block-title",r.innerText=o,a.appendChild(r)}let d=document.createElement("div");return d.className="md-preview",d.classList.add("markdown-rendered"),L.MarkdownRenderer.render(this.app,e,d,i,this).then(()=>{d.querySelectorAll("img").forEach(m=>{m.classList.add("horizontal-block-image")})}),a.appendChild(d),a}makeResizable(e,i,o,a,d){let r=!1,m=0,c=0,s=null,l=null,h=v=>{r=!0,m=v.clientX,c=e.getBoundingClientRect().width,document.body.classList.add("resizing-cursor"),e.classList.add("flex-fixed"),e.classList.remove("flex-grow"),i.classList.add("flex-grow"),i.classList.remove("flex-fixed"),s=f=>{if(!r)return;let u=f.clientX-m,w=c+u;e.classList.add("flex-fixed"),e.classList.remove("flex-grow"),this.applyBlockWidth(e,w),i.classList.add("flex-grow"),i.classList.remove("flex-fixed"),this.removeBlockWidth(i)},l=async()=>{r=!1,document.body.classList.remove("resizing-cursor"),s&&(document.removeEventListener("mousemove",s),s=null),l&&(document.removeEventListener("mouseup",l),l=null);let f=e.getBoundingClientRect().width,u=`horizontal-block-layout-${a}`;this.settings[u]||(this.settings[u]={}),this.settings[u][`width-${d}`]=f,await this.saveData(this.settings)},document.addEventListener("mousemove",s),document.addEventListener("mouseup",l)};this.registerDomEvent(o,"mousedown",h)}async hashString(e){let i=new TextEncoder().encode(e),o=await crypto.subtle.digest("SHA-256",i);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("").slice(0,16)}applyBlockWidth(e,i){e.classList.add("has-width"),e.setAttribute("style",`--block-width: ${Math.round(i)}px`)}removeBlockWidth(e){e.classList.remove("has-width"),e.removeAttribute("style")}};
